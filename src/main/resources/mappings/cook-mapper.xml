<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cookMapper">
 
   <insert id="insertCook" parameterType="cook">
    INSERT INTO COMMUNITY (COM_SEQ, TITLE, NICKNAME, CONTENT, REGDATE, HIT, LIKES, TYPE)
  		VALUES ((COMMMUNITY_SEQ.NEXTVAL) + 1,
  			#{title}, #{nickname}, #{content}, SYSDATE, 0, 0, 3)
            
  		INSERT INTO COMM_COOK (TYPE,COM_SEQ,IMAGE,P_NUM,COOKTIME)
  		VALUES (3, (select NVL(MAX(com_seq),0)from community),#{image},#{p_num},#{cooktime})
  	</insert>
	
	<select id="selectOne" parameterType="String" resultType="cook">
		   SELECT * FROM COMMUNITY WHERE COM_SEQ = #{com_seq}
	</select>
	<select id="selectAll" resultType="cook">
		SELECT *
		FROM COMMUNITY C, COMM_COOK CO
		WHERE C.COM_SEQ = CO.COM_SEQ
	</select>
</mapper>